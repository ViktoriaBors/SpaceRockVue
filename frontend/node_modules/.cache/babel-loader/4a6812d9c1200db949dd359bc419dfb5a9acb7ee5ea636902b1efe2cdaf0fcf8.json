{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/web.timers.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport { createVNode as _createVNode, createElementVNode as _createElementVNode, unref as _unref, isRef as _isRef, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"text-justify\"\n};\nvar _hoisted_2 = {\n  \"class\": \"container mx-auto px-6 py-4 bg-slate-200\"\n};\nvar _hoisted_3 = /*#__PURE__*/_createElementVNode(\"p\", {\n  \"class\": \"pt-2 text-lg text-center font-bold py-4\"\n}, \" Here you can see your pending samples in the database. \", -1);\nvar _hoisted_4 = {\n  action: \"GET\",\n  \"class\": \"mb-4\"\n};\nvar _hoisted_5 = {\n  \"class\": \"flex justify-center\"\n};\nvar _hoisted_6 = {\n  \"class\": \"w-full md:w-2/4\"\n};\nvar _hoisted_7 = {\n  \"class\": \"relative flex flex-wrap sm:flex-nowrap items-stretch w-full mb-2\"\n};\nvar _hoisted_8 = {\n  \"class\": \"flex flex-row justify-center items-center\"\n};\nvar _hoisted_9 = {\n  \"class\": \"p-2\"\n};\nvar _hoisted_10 = /*#__PURE__*/_createElementVNode(\"label\", {\n  \"for\": \"alphabetical\",\n  \"class\": \"cursor-pointer peer-checked:bg-yellow-600 checked:shadow-lg inline-block px-5 py-2.5 bg-indigo-300 text-gray-700 font-bold text-xs leading-tight uppercase rounded shadow-md hover:bg-indigo-400 hover:shadow-lg\"\n}, \"Alphabetical\", -1);\nvar _hoisted_11 = {\n  \"class\": \"p-2\"\n};\nvar _hoisted_12 = /*#__PURE__*/_createElementVNode(\"label\", {\n  \"for\": \"newest\",\n  \"class\": \"cursor-pointer peer-checked:bg-yellow-600 checked:shadow-lg inline-block px-5 py-2.5 bg-indigo-300 text-gray-700 font-bold text-xs leading-tight uppercase rounded shadow-md hover:bg-indigo-400 hover:shadow-lg\"\n}, \"Newest first\", -1);\nvar _hoisted_13 = {\n  key: 0\n};\nvar _hoisted_14 = {\n  key: 1\n};\nvar _hoisted_15 = /*#__PURE__*/_createElementVNode(\"div\", {\n  \"class\": \"shadow-lg bg-white mt-2\"\n}, [/*#__PURE__*/_createElementVNode(\"h5\", {\n  \"class\": \"text-gray-900 text-md font-bold mb-2 p-2\"\n}, \" No sample found \")], -1);\nvar _hoisted_16 = [_hoisted_15];\nimport DashboardNav from \"../components/DashboardNav.vue\";\nimport BottomFooter from \"../components/BottomFooter.vue\";\nimport Accordion from \"../components/Accordion.vue\";\nimport SampleCardForm from \"../components/SampleCardForm.vue\";\nimport { onMounted, ref } from \"vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nexport default {\n  __name: 'DashboardView',\n  setup: function setup(__props) {\n    var imgSource = \"(img/pexels-mike-b-383559.jpg)\";\n    var user = ref(null);\n\n    // for redirect\n    var router = useRouter();\n    var route = useRoute();\n    // during \"create\" = setup - check user session\n    fetch(\"http://localhost:8081/user\", {\n      credentials: \"include\"\n    }).then(function (res) {\n      if (!res.ok) {\n        throw new Error(\"error\");\n      } else return res.json();\n    }).then(function (data) {\n      user.value = data;\n    })[\"catch\"](function (error) {\n      console.log(error);\n      swal({\n        title: \"Error\",\n        text: \"Access Denied\",\n        icon: \"error\"\n      });\n      setTimeout(function () {\n        router.push({\n          name: \"login\"\n        });\n      }, 2000);\n      isSearchActive.value = true;\n    });\n\n    // Get sample data - user specific\n    var searchWord = ref(\"\");\n    var alphabetical = ref(false);\n    var newest = ref(false);\n    var sampleData = ref([]);\n    var noSample = ref(false);\n    var getData = function getData() {\n      console.log(\"search\");\n      var email = user.value.email;\n      fetch(\"http://localhost:8081/data/modify?alphabetic=\".concat(alphabetical.value.checked, \"&newest=\").concat(newest.value.checked, \"&email=\").concat(email)).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        if (data.length === 0) {\n          noSample.value = true;\n          return;\n        } else {\n          noSample.value = false;\n          if (searchWord.value) {\n            var sampleArray = [];\n            for (var i = 0; i < data.length; i++) {\n              if (data[i].name.toLowerCase().match(searchWord.value.toLowerCase())) {\n                sampleArray.push(data[i]);\n              }\n              sampleData.value = sampleArray;\n            }\n          } else {\n            sampleData.value = data;\n          }\n        }\n      });\n      alphabetical.value.checked = false;\n      newest.value.checked = false;\n    };\n    return function (_ctx, _cache) {\n      return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(DashboardNav, {\n        user: user.value\n      }, null, 8, [\"user\"]), _createElementVNode(\"main\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"form\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_withDirectives(_createElementVNode(\"input\", {\n        type: \"text\",\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n          return _isRef(searchWord) ? searchWord.value = $event : searchWord = $event;\n        }),\n        \"class\": \"form-control relative flex-auto min-w-0 block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-gray-700\",\n        placeholder: \"Search\",\n        \"aria-label\": \"Search\",\n        \"aria-describedby\": \"searchSavedBtn\"\n      }, null, 512), [[_vModelText, _unref(searchWord)]]), _createElementVNode(\"button\", {\n        id: \"searchSavedBtn\",\n        onClick: getData,\n        \"class\": \"btn inline-block px-6 py-2 border-2 border-gray-400 bg-yellow-500 text-black font-bold text-xs leading-tight uppercase rounded shadow-md hover:bg-yellow-600 hover:shadow-lg active:bg-yellow-700 active:shadow-lg focus:outline-none focus:ring-0 transition duration-150 ease-in-out\",\n        type: \"button\"\n      }, \" Search \")])])]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"input\", {\n        type: \"radio\",\n        id: \"alphabetical\",\n        name: \"sorting\",\n        value: \"alphabetical\",\n        \"class\": \"hidden peer sr-only\",\n        ref_key: \"alphabetical\",\n        ref: alphabetical\n      }, null, 512), _hoisted_10]), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"input\", {\n        type: \"radio\",\n        id: \"newest\",\n        name: \"sorting\",\n        value: \"newest\",\n        \"class\": \"hidden peer sr-only\",\n        ref_key: \"newest\",\n        ref: newest\n      }, null, 512), _hoisted_12])])]), _unref(sampleData).length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [_createVNode(SampleCardForm, {\n        sampleData: _unref(sampleData),\n        user: user.value\n      }, null, 8, [\"sampleData\", \"user\"])])) : _createCommentVNode(\"\", true), _unref(noSample) ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, _hoisted_16)) : _createCommentVNode(\"\", true), _createVNode(Accordion, {\n        user: user.value\n      }, null, 8, [\"user\"])])])]);\n    };\n  }\n};","map":{"version":3,"mappings":"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","names":["DashboardNav","BottomFooter","Accordion","SampleCardForm","onMounted","ref","useRouter","useRoute","imgSource","user","router","route","fetch","credentials","then","res","ok","Error","json","data","value","error","console","log","swal","title","text","icon","setTimeout","push","name","isSearchActive","searchWord","alphabetical","newest","sampleData","noSample","getData","email","checked","length","sampleArray","i","toLowerCase","match"],"sources":["/home/viki/Projects/JSExamProjectFinal/Vue/SpaceRockVue/frontend/src/views/DashboardView.vue"],"sourcesContent":["<template>\n  <div>\n    <DashboardNav :user=\"user\" />\n    <main class=\"text-justify\">\n      <div class=\"container mx-auto px-6 py-4 bg-slate-200\">\n        <p class=\"pt-2 text-lg text-center font-bold py-4\">\n          Here you can see your pending samples in the database.\n        </p>\n        <form action=\"GET\" class=\"mb-4\">\n          <!--search-bar-->\n          <div class=\"flex justify-center\">\n            <div class=\"w-full md:w-2/4\">\n              <div\n                class=\"\n                  relative\n                  flex flex-wrap\n                  sm:flex-nowrap\n                  items-stretch\n                  w-full\n                  mb-2\n                \"\n              >\n                <input\n                  type=\"text\"\n                  v-model=\"searchWord\"\n                  class=\"\n                    form-control\n                    relative\n                    flex-auto\n                    min-w-0\n                    block\n                    w-full\n                    px-3\n                    py-1.5\n                    text-base\n                    font-normal\n                    text-gray-700\n                    bg-white bg-clip-padding\n                    border border-solid border-gray-300\n                    rounded\n                    transition\n                    ease-in-out\n                    m-0\n                    focus:text-gray-700 focus:bg-white focus:border-gray-700\n                  \"\n                  placeholder=\"Search\"\n                  aria-label=\"Search\"\n                  aria-describedby=\"searchSavedBtn\"\n                />\n                <button\n                  id=\"searchSavedBtn\"\n                  @click=\"getData\"\n                  class=\"\n                    btn\n                    inline-block\n                    px-6\n                    py-2\n                    border-2 border-gray-400\n                    bg-yellow-500\n                    text-black\n                    font-bold\n                    text-xs\n                    leading-tight\n                    uppercase\n                    rounded\n                    shadow-md\n                    hover:bg-yellow-600 hover:shadow-lg\n                    active:bg-yellow-700 active:shadow-lg\n                    focus:outline-none focus:ring-0\n                    transition\n                    duration-150\n                    ease-in-out\n                  \"\n                  type=\"button\"\n                >\n                  Search\n                </button>\n              </div>\n            </div>\n          </div>\n          <!--sorting options-->\n          <div class=\"flex flex-row justify-center items-center\">\n            <div class=\"p-2\">\n              <input\n                type=\"radio\"\n                id=\"alphabetical\"\n                name=\"sorting\"\n                value=\"alphabetical\"\n                class=\"hidden peer sr-only\"\n                ref=\"alphabetical\"\n              />\n              <label\n                for=\"alphabetical\"\n                class=\"\n                  cursor-pointer\n                  peer-checked:bg-yellow-600\n                  checked:shadow-lg\n                  inline-block\n                  px-5\n                  py-2.5\n                  bg-indigo-300\n                  text-gray-700\n                  font-bold\n                  text-xs\n                  leading-tight\n                  uppercase\n                  rounded\n                  shadow-md\n                  hover:bg-indigo-400 hover:shadow-lg\n                \"\n                >Alphabetical</label\n              >\n            </div>\n            <div class=\"p-2\">\n              <input\n                type=\"radio\"\n                id=\"newest\"\n                name=\"sorting\"\n                value=\"newest\"\n                class=\"hidden peer sr-only\"\n                ref=\"newest\"\n              />\n              <label\n                for=\"newest\"\n                class=\"\n                  cursor-pointer\n                  peer-checked:bg-yellow-600\n                  checked:shadow-lg\n                  inline-block\n                  px-5\n                  py-2.5\n                  bg-indigo-300\n                  text-gray-700\n                  font-bold\n                  text-xs\n                  leading-tight\n                  uppercase\n                  rounded\n                  shadow-md\n                  hover:bg-indigo-400 hover:shadow-lg\n                \"\n                >Newest first</label\n              >\n            </div>\n          </div>\n        </form>\n        <!--Already saved samples by user appears here - all forms plus pagination-->\n        <div v-if=\"sampleData.length\">\n          <SampleCardForm :sampleData=\"sampleData\" :user=\"user\" />\n        </div>\n        <div v-if=\"noSample\">\n          <div class=\"shadow-lg bg-white mt-2\">\n            <h5 class=\"text-gray-900 text-md font-bold mb-2 p-2\">\n              No sample found\n            </h5>\n          </div>\n        </div>\n        <Accordion :user=\"user\" />\n      </div>\n    </main>\n  </div>\n</template>\n\n<script setup>\nimport DashboardNav from \"../components/DashboardNav.vue\";\nimport BottomFooter from \"../components/BottomFooter.vue\";\nimport Accordion from \"../components/Accordion.vue\";\nimport SampleCardForm from \"../components/SampleCardForm.vue\";\nimport { onMounted, ref } from \"vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nlet imgSource = \"(img/pexels-mike-b-383559.jpg)\";\n\nconst user = ref(null);\n\n// for redirect\nconst router = useRouter();\nconst route = useRoute();\n// during \"create\" = setup - check user session\nfetch(`http://localhost:8081/user`, {\n  credentials: \"include\",\n})\n  .then((res) => {\n    if (!res.ok) {\n      throw new Error(\"error\");\n    } else return res.json();\n  })\n  .then((data) => {\n    user.value = data;\n  })\n  .catch((error) => {\n    console.log(error);\n    swal({\n      title: \"Error\",\n      text: \"Access Denied\",\n      icon: \"error\",\n    });\n    setTimeout(() => {\n      router.push({ name: \"login\" });\n    }, 2000);\n    isSearchActive.value = true;\n  });\n\n// Get sample data - user specific\nlet searchWord = ref(\"\");\nlet alphabetical = ref(false);\nlet newest = ref(false);\n\nlet sampleData = ref([]);\nlet noSample = ref(false);\n\nconst getData = () => {\n  console.log(\"search\");\n  let email = user.value.email;\n  fetch(\n    `http://localhost:8081/data/modify?alphabetic=${alphabetical.value.checked}&newest=${newest.value.checked}&email=${email}`\n  )\n    .then((res) => res.json())\n    .then((data) => {\n      if (data.length === 0) {\n        noSample.value = true;\n        return;\n      } else {\n        noSample.value = false;\n        if (searchWord.value) {\n          let sampleArray = [];\n          for (let i = 0; i < data.length; i++) {\n\n            if (\n              data[i].name.toLowerCase().match(searchWord.value.toLowerCase())\n            ) {\n              sampleArray.push(data[i]);\n            }\n            sampleData.value = sampleArray;\n          }\n        } else {\n          sampleData.value = data;\n        }\n      }\n    });\n  alphabetical.value.checked = false;\n  newest.value.checked = false;\n};\n</script>\n\n<style>\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}